/* mousetrap v1.0 craig.is/killing/mice */
window.Mousetrap=function(){function l(a,e,c){if(a.addEventListener)return a.addEventListener(e,c,!1);a.attachEvent("on"+e,c)}function n(a){var a=a||{},e;for(e in h)a[e]||(h[e]=0)}function o(a,e,c,b){var g,f,d=[];if(!i[a])return[];if("keyup"==c&&(15<a&&19>a||91==a))e=[a];for(g=0;g<i[a].length;++g)f=i[a][g],!(f.chain&&h[f.chain]!=f.level)&&(c==f.action&&e.sort().join(",")===f.modifiers.sort().join(","))&&(b&&i[a].splice(g,1),d.push(f));return d}function p(a,e,c){var b;b=c.target||c.srcElement;var g=
b.tagName;b=-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==g||"SELECT"==g||"TEXTAREA"==g;if(!b){b=[];c.shiftKey&&b.push(j.shift);c.altKey&&b.push(j.alt);c.ctrlKey&&b.push(j.ctrl);c.metaKey&&b.push(j.command);b=o(a,b,e);for(var g={},f=!1,d=!(15<a&&19>a||91==a),a=0;a<b.length;++a)if(b[a].chain)f=!0,g[b[a].chain]=1,b[a].callback(c);else if(!f){b[a].callback(c);break}(d||f)&&!e&&n(g)}}function t(a){p(93==a.keyCode||224==a.keyCode?91:a.keyCode,"keydown",a)}function u(a){p(93==a.keyCode||224==
a.keyCode?91:a.keyCode,"keyup",a)}function v(a){clearTimeout(q);q=setTimeout(function(){h[a]=0},1E3)}function w(a,e,c,b){h[a]=0;var g=function(){++h[a];v(a)},f=function(){c();setTimeout(n,10)},d;for(d=0;d<e.length;++d)r(e[d],d<e.length-1?g:f,b,a,d)}function r(a,e,c,b,g){var a=a.replace(/\s+\+\s+/g,"+").replace(/\s+/g," "),f=a.split(" "),d,h=[];if(1<f.length)return w(a,f,e,c);f=a.split("+");for(a=0;a<f.length;++a)d=f[a],s[d]&&(h.push(j.shift),d=s[d]),d=j[d]||d.toUpperCase().charCodeAt(0),(15<d&&19>
d||91==d)&&h.push(d);i[d]||(i[d]=[]);o(d,h,c,!b);i[d][b?"unshift":"push"]({callback:e,modifiers:h,action:c,chain:b,level:g})}for(var j={backspace:8,tab:9,enter:13,"return":13,shift:16,ctrl:17,alt:18,option:18,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:46,meta:91,command:91,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8",
"(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},i={},m={},h={},q,k=1;20>k;++k)j["f"+k]=111+k;return{bind:function(a,e,c){for(var c=c||"keydown",b=a instanceof Array?a:a.split(","),g=c,f=0;f<b.length;++f)r(b[f],e,g);m[a+":"+c]=e},trigger:function(a,e){m[a+":"+(e||"keydown")]()},addEvent:function(a,e,c){l(a,e,c)},reset:function(){i={};m={}},init:function(){l(document,"keydown",t);l(document,"keyup",u)}}}();Mousetrap.addEvent(window,"load",Mousetrap.init);
