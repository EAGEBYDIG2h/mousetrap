window.Mousetrap=function(){function l(a,b,d){if(a.addEventListener)return a.addEventListener(b,d,!1);a.attachEvent("on"+b,d)}function o(a){a=(a.target||a.srcElement).tagName;return"INPUT"==a||"SELECT"==a||"TEXTAREA"==a}function m(a,b,d,g){if(i[a]){var f,c;if("up"==d&&(15<a&&19>a||91==a))b=[a];for(f=0;f<i[a].length;++f)if(c=i[a][f],!(c.chain&&h[c.chain]!=c.level)&&d==c.action&&b.sort().join(",")===c.modifiers.sort().join(","))return g&&i[a].splice(f,1),c}}function p(a){var b=[];a.shiftKey&&b.push(j.shift);
a.altKey&&b.push(j.alt);a.ctrlKey&&b.push(j.ctrl);a.metaKey&&b.push(j.command);return b}function t(a){if(!o(a)){var b=m(93==a.keyCode||224==a.keyCode?91:a.keyCode,p(a),"");b&&b.callback(a)}}function u(a){if(!o(a)){var b=m(93==a.keyCode||224==a.keyCode?91:a.keyCode,p(a),"up");b&&b.callback(a)}}function v(a){clearTimeout(q);q=setTimeout(function(){h[a]=0},1E3)}function w(a,b,d,g){h[a]=0;for(var f=function(){++h[a];v(a)},c=0;c<b.length;++c)r(b[c],c<b.length-1?f:d,g,a,c)}function r(a,b,d,g,f){var a=a.replace(/\s+\+\s+/g,
"+").replace(/\s+/," "),c=a.split(" "),e,h=[];if(1<c.length)return w(a,c,b,d);c=a.split("+");for(a=0;a<c.length;++a)e=c[a],s[e]&&(h.push(j.shift),e=s[e]),e=j[e]||e.toUpperCase().charCodeAt(0),(15<e&&19>e||91==e)&&h.push(e);i[e]||(i[e]=[]);m(e,h,d,!g);i[e][g?"unshift":"push"]({callback:b,modifiers:h,action:d,chain:g,level:f})}for(var j={backspace:8,tab:9,enter:13,"return":13,shift:16,ctrl:17,alt:18,option:18,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,
down:40,del:46,meta:91,command:91,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},i={},n={},h={},q,k=1;13>k;++k)j["f"+k]=111+k;return{bind:function(a,b,d){for(var d="up"==d?"up":"",g=a instanceof Array?a:a.split(","),f=d,c=0;c<g.length;++c)r(g[c],b,f);n[a+":"+d]=b},trigger:function(a,b){n[a+":"+("up"==b?"up":
"")]()},addEvent:function(a,b,d){l(a,b,d)},clear:function(){i={};n={}},init:function(){l(document,"keydown",t);l(document,"keyup",u)}}}();Mousetrap.addEvent(window,"load",Mousetrap.init);
