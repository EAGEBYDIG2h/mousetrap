/* mousetrap v1.0 craig.is/killing/mice */
window.Mousetrap=function(){function m(a,f,c){if(a.addEventListener)return a.addEventListener(f,c,!1);a.attachEvent("on"+f,c)}function n(){k=!1;for(var a in h)h[a]=0}function q(a,f,c,b){var g,e,d=[];if(!i[a])return[];if("keyup"==c&&(15<a&&19>a||91==a))f=[a];for(g=0;g<i[a].length;++g)e=i[a][g],!(e.seq&&h[e.seq]!=e.level)&&(c==e.action&&f.sort().join(",")===e.modifiers.sort().join(","))&&(b&&i[a].splice(g,1),d.push(e));return d}function r(a,f,c){var b;b=c.target||c.srcElement;var g=b.tagName;b=-1<(" "+
b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==g||"SELECT"==g||"TEXTAREA"==g;if(!b){b=[];c.shiftKey&&b.push(j.shift);c.altKey&&b.push(j.alt);c.ctrlKey&&b.push(j.ctrl);c.metaKey&&b.push(j.command);b=q(a,b,f);for(var e=!1,g=0;g<b.length;++g)if(b[g].seq)e=!0,b[g].callback(c);else if(!e&&!k){b[g].callback(c);break}f==k&&(!e&&!(15<a&&19>a||91==a))&&n()}}function v(a){r(93==a.keyCode||224==a.keyCode?91:a.keyCode,"keydown",a)}function w(a){o===a.keyCode?o=!1:r(93==a.keyCode||224==a.keyCode?91:a.keyCode,
"keyup",a)}function x(a,f,c,b){h[a]=0;var g=function(){k=b;++h[a];clearTimeout(s);s=setTimeout(n,1E3)},e=function(a){c(a);"keydown"===b&&(o=a.keyCode);setTimeout(n,10)},d;for(d=0;d<f.length;++d)t(f[d],d<f.length-1?g:e,b,a,d)}function t(a,f,c,b,g){var a=a.replace(/\s+\+\s+/g,"+").replace(/\s+/g," "),e=a.split(" "),d,h=[];if(1<e.length)return x(a,e,f,c);e=a.split("+");for(a=0;a<e.length;++a)d=e[a],u[d]&&(h.push(j.shift),d=u[d]),d=j[d]||d.toUpperCase().charCodeAt(0),(15<d&&19>d||91==d)&&h.push(d);i[d]||
(i[d]=[]);q(d,h,c,!b);i[d][b?"unshift":"push"]({callback:f,modifiers:h,action:c,seq:b,level:g})}for(var j={backspace:8,tab:9,enter:13,"return":13,shift:16,ctrl:17,alt:18,option:18,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:46,meta:91,command:91,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",
":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},i={},p={},h={},s,o=!1,k=!1,l=1;20>l;++l)j["f"+l]=111+l;return{bind:function(a,f,c){for(var c=c||"keydown",b=a instanceof Array?a:a.split(","),g=c,e=0;e<b.length;++e)t(b[e],f,g);p[a+":"+c]=f},trigger:function(a,f){p[a+":"+(f||"keydown")]()},addEvent:function(a,f,c){m(a,f,c)},reset:function(){i={};p={}},init:function(){m(document,"keydown",v);m(document,"keyup",w)}}}();Mousetrap.addEvent(window,"load",Mousetrap.init);
